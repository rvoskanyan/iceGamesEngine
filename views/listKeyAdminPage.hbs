<style>
    li p {
        display: inline;
        margin-right: 8px;
    }

    .table_name {
        display: flex;
    }

    .table_name p:first-child {
        margin-left: 20px;
        margin-right: 100px;
    }

    .table_name p:nth-child(2) {
        margin-right: 90px;
    }

    .table_name p:nth-child(3) {
        margin-right: 80px;
    }

    table,
    th,
    td {
        border: 1px solid;
    }

    table {
        margin-top: 18px;
        border-spacing: 0;
        text-align: center;
    }

    table a, table a:visited {
        color: #0045e0;
    }

    tbody {
        white-space: nowrap;
    }

    th,
    td {
        padding: 5px 10px;
        border-top-width: 0;
        border-left-width: 0;
    }

    th {
        position: sticky;
        top: 0;

        vertical-align: bottom;
    }

    th:last-child,
    td:last-child {
        border-right-width: 0;
    }

    tr:last-child td {
        border-bottom-width: 0;
    }
</style>

<a href="/admin/{{section}}/add/">{{addTitle}}</a>
<br><br>
<form action="/admin/keys">
    <input type="text" readonly hidden value="1" name="page">
    <label>
        Поиск по играм
        <select name="product_id">
            <option value="">-*-*-*-*-*-*</option>
            {{#each games}}
                <option {{#iff id '===' ../selected_game}}selected{{/iff}}
                        value="{{id}}">{{name}}</option>
            {{/each}}
        </select>
    </label>
    <label>
        Поиск и по не активным:
        <input type="checkbox" name="is_active" id="" {{#if is_active}}checked{{/if}}>
    </label>
    <button type="submit">Найти</button>
    <a href="/admin/keys?page=1"> Сбросить</a>
</form>
<p>Ключей найдено: {{count}}</p>
<table>
    <thead>
    <tr>
        <th>Key</th>
        <th>Product</th>
        <th>Expired</th>
        <th>Buyer</th>
        <th>Active</th>
    </tr>
    </thead>
    <tbody>
    {{#each elements}}
        <tr>
            <td><a href="/admin/keys/edit/{{id}}">{{shortOut key 5}}</a></td>
            <td><a href="/admin/keys?page=1{{#if is_active}}&is_active=on{{/if}}&product_id={{product._id}}">{{product.name}}</a></td>
            <td>{{#if expired}}{{dateFormat expired}}{{else}}---{{/if}}</td>
            <td>{{#if boughtInOrder}}{{boughtInOrder.buyerEmail}}{{else}}Нет{{/if}}</td>
            <td><input disabled type="checkbox" {{#if is_active}}checked{{/if}}></td>
        </tr>
    {{/each}}
    </tbody>
</table>
<div>
    {{#iff page '!==' 1}}
        <a href="/admin/keys?page={{sub page 1}}{{#if is_active}}&is_active=on{{/if}}&product_id={{selected_game}}">
        <button>Prev</button>
        </a>
    {{else}}
        <button>Prev</button>
    {{/iff}}
    {{#iff page '!==' pages}}
        <a href="/admin/keys?page={{inc 1 page}}{{#if is_active}}&is_active=on{{/if}}&product_id={{selected_game}}">
        <button>Next</button>
        </a>
    {{else}}
        <button>Next</button>
    {{/iff}}
</div>
